---
/**
 * TabBar component â€” navigation tabs for feed views.
 *
 * Accepts a configurable list of tabs via the `tabs` prop.
 * Defaults to the standard feed view tabs if none are provided.
 *
 * @since 0.2.0
 */

interface Tab {
  id: string;
  label: string;
  active: boolean;
  disabled: boolean;
}

interface Props {
  /** Tab definitions. Defaults to standard feed view tabs. @since 0.5.0 */
  tabs?: Tab[];
  /** Accessible label for the tab bar. @since 0.5.0 */
  ariaLabel?: string;
}

const defaultTabs: Tab[] = [
  { id: 'all', label: 'All Feeds', active: true, disabled: false },
  { id: 'following', label: 'My Feed', active: false, disabled: true },
  { id: 'trending', label: 'Trending', active: false, disabled: true },
  { id: 'starred', label: 'Starred', active: false, disabled: true },
];

const { tabs = defaultTabs, ariaLabel = 'Feed views' } = Astro.props;
---

<slot name="before-unnamed-slot" />
<nav class="crss-tab-bar" role="tablist" aria-label={ariaLabel}>
  {
    tabs.map((tab) => (
      <button
        role="tab"
        id={`tab-${tab.id}`}
        class:list={[
          'crss-tab-bar__tab',
          { 'crss-tab-bar__tab--active': tab.active },
          { 'crss-tab-bar__tab--disabled': tab.disabled },
        ]}
        aria-selected={tab.active}
        disabled={tab.disabled}
        data-tab={tab.id}
      >
        {tab.label}
      </button>
    ))
  }
</nav>
<slot />
<slot name="after-unnamed-slot" />

<style is:global>
  @layer crss-components {
    .crss-tab-bar {
      display: flex;
      gap: var(--crss-comp-tab-gap);
      border-bottom: 2px solid var(--crss-comp-tab-border-color);
      margin-bottom: var(--crss-sys-space-lg);
      overflow-x: auto;
    }

    .crss-tab-bar__tab {
      padding: var(--crss-comp-tab-padding-y) var(--crss-comp-tab-padding-x);
      border: none;
      background: none;
      font-family: var(--crss-font-family);
      font-size: var(--crss-comp-tab-font-size);
      font-weight: 500;
      color: var(--crss-comp-tab-color);
      cursor: pointer;
      border-bottom: 2px solid transparent;
      margin-bottom: -2px;
      transition:
        color var(--crss-sys-transition-fast),
        border-color var(--crss-sys-transition-fast);
      white-space: nowrap;
    }

    .crss-tab-bar__tab:hover:not(:disabled) {
      color: var(--crss-sys-color-text-primary);
    }

    .crss-tab-bar__tab--active {
      color: var(--crss-comp-tab-active-color);
      border-bottom-color: var(--crss-comp-tab-active-color);
    }

    .crss-tab-bar__tab--disabled {
      opacity: var(--crss-comp-tab-disabled-opacity);
      cursor: not-allowed;
    }
  }
</style>
